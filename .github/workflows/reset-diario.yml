name: Juiz Automatico KN Jogos

on:
  schedule:
    # Roda as 03:00 UTC (00:00 Brasil)
    - cron: '0 3 * * *'
  # Bot√£o para rodar manual
  workflow_dispatch:

jobs:
  premiar:
    runs-on: ubuntu-latest

    steps:
    - name: Baixar c√≥digo do reposit√≥rio
      uses: actions/checkout@v3

    - name: Instalar Node.js
      uses: actions/setup-node@v3
      with:
        node-version: 18

    - name: Instalar Depend√™ncias (Firebase)
      run: npm install firebase-admin

    # --- AQUI EST√Å O DETETIVE ---
    - name: üïµÔ∏è‚Äç‚ôÇÔ∏è MODO DETETIVE (Listar Arquivos)
      run: |
        echo "--- ARQUIVOS NA RAIZ ---"
        ls -la
        echo "--- ARQUIVOS DENTRO DE SCRIPTS ---"
        ls -la scripts || echo "‚ùå A PASTA SCRIPTS N√ÉO FOI ENCONTRADA!"

    - name: Rodar o Juiz
      env:
        FIREBASE_SERVICE_ACCOUNT: ${{ secrets.FIREBASE_SERVICE_ACCOUNT }}
      run: node scripts/juiz.js
